<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
  <title></title>
	<script type="text/javascript" src="/jquery/json.js"></script>
	<script type="text/javascript" src="/jquery/jquery-1.5.min.js"></script>
	<script type="text/javascript" src="/migrator/migrator.php?app=benchmark_array"></script>
	<script type="text/javascript" >

function startTest(){};	
function test(s,f){f();};
function prep(f){f();};
function endTest(){};

/* The Great Computer Language Shootout
   http://shootout.alioth.debian.org/
   contributed by Isaac Gouy */


function runTest(){ startTest("dromaeo-object-array", 'bde4f5f4');

var ret = [], tmp, num = 500;
var i = 1024;

	// TESTS: Array Building

	test("Array Construction, []", function(){
		for ( var j = 0; j < i * 15; j++ ) {
			ret = [];
			ret.length = i;
		}
	});

	test("Array Construction, new Array()", function(){
		for ( var j = 0; j < i * 10; j++ )
			ret = new Array(i);
	});

	test("Array Construction, unshift", function(){
		ret = [];
		for ( var j = 0; j < i; j++ )
			ret.unshift(j);
	});

	test("Array Construction, splice", function(){
		ret = [];
		for ( var j = 0; j < i; j++ )
			ret.splice(0,0,j);
	});

	test("Array Deconstruction, shift", function(){
		var a = ret.slice();
		for ( var j = 0; j < i; j++ )
			tmp = a.shift();
	});

	test("Array Deconstruction, splice", function(){
		var a = ret.slice();
		for ( var j = 0; j < i; j++ )
			tmp = a.splice(0,1);
	});

	test("Array Construction, push", function(){
		ret = [];
		for ( var j = 0; j < i * 25; j++ )
			ret.push(j);
	});

	test("Array Deconstruction, pop", function(){
		var a = ret.slice();
		for ( var j = 0; j < i * 25; j++ )
			tmp = a.pop();
	});

endTest(); 
};
	</script>

</head>
<body>
	<h2 id='title1'>Dromaeo Arrays Test</h2><br/>
	<button class="run1" style="display:block;margin-top:40px;height:40px;width:150px;font-size:20px;" >Start Test</button><label id="label1" style="display:auto;"></label><br/>
	
	<script type="text/javascript" >
		$(".run1").click(function(event){
				var startTime=new Date().getTime();
				runTest();
				var timeConsume=new Date().getTime()-startTime;
				document.getElementById("label1").innerHTML="Time Consuming:"+timeConsume.toString()+"ms";
		});
		$('title').html($("#title1").html());
	</script>

</body></html>

